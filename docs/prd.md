---
title: PRD — Система фрейминга портфеля инициатив
status: draft
lastUpdated: 2025-09-17
---

## 1. Контекст и цели
- Инструмент для формирования и приоритизации портфеля инициатив: создание инициатив, обсуждение, назначение атрибутов и ответственных.
- Граница: веб‑клиент с чат‑комментариями, простая регистрация/логин, JWT‑аутентификация, базовые фильтры и сортировка по весу.
- Цель: обеспечить прозрачный сбор инициатив и быстрый выбор приоритетов для команды.
- Критерий успеха: пользователь может за 2–3 минуты добавить инициативу, выставить атрибуты и отфильтровать список по назначенности/авторству, видя корректную сортировку по весу.

## 2. Роли и персоны
- Пользователь (единая роль): может регистрироваться/логиниться, создавать инициативы (markdown), комментировать в формате чата, назначать атрибуты (ценность, скорость, стоимость), назначать ответственного, фильтровать и сортировать список.

## 3. Ключевые пользовательские сценарии
- US1: Создание инициативы — пользователь вводит название и описание в markdown и сохраняет.
- US2: Комментирование — пользователи обмениваются сообщениями в чате под инициативой.
- US3: Оценка атрибутов — любой пользователь выставляет 1–5 для ценности, скорости, стоимости.
- US4: Назначение ответственного — пользователь выбирает ответственного из списка пользователей.
- US5: Обзор списка — пользователь применяет фильтр «все/я предложил/назначено на меня» и сортирует по весу.
- US6: Регистрация и вход — пользователь регистрируется (логин, отображаемое имя, пароль ×2) и входит, далее взаимодействует с системой.

## 4. Функциональные требования (FR) и критерии приёмки (AC)

### FR1. Создание инициативы с markdown-описанием
- Поля: название (обязательно), описание (markdown, обязательно), автор, дата создания.
- Валидация: название 1–140 символов; описание 1–10 000 символов; markdown сохраняется как текст.
- Состояния: черновик не предусмотрен, инициатива создаётся сразу как активная.
- AC:
  1) При вводе валидных данных инициатива создаётся и видна в списке с автором и датой.
  2) Описание отображается с markdown‑рендерингом (заголовки, списки, ссылки, кодовые блоки).
  3) При пустом названии или описании показана внятная ошибка сохранения.
  4) Мобильный вид корректно переносит строки без горизонтального скролла.
- Пример: «Автоматизировать отчётность» с описанием в markdown со списком задач.

### FR2. Комментарии в формате чата
- Возможности: добавление, показ в порядке по времени, отображение автора и времени; авто‑прокрутка к новому сообщению.
- Валидация: текст 1–2000 символов.
- AC:
  1) Новый комментарий сразу появляется внизу ленты без перезагрузки страницы.
  2) Имя автора и время видны; длинные строки переносятся.
  3) При ошибке отправки пользователь видит уведомление и может повторить.
- Пример: «Предлагаю начать с MVP».

### FR3. Атрибуты инициативы (ценность, скорость, стоимость) 1–5
- Диапазоны: целые 1…5; 1 — «низкая», 5 — «высокая».
- Возможности: любой пользователь может выставить/обновить атрибуты; хранить последнюю актуальную оценку по атрибуту на инициативе.
- AC:
  1) Контролы выбора значений 1–5 доступны на карточке инициативы и в деталях.
  2) При изменении значения вес пересчитывается мгновенно и отражается в UI.
  3) Нельзя сохранить значения вне диапазона; показывается понятная ошибка валидации.
- Пример: ценность=5, скорость=3, стоимость=2.

### FR4. Расчёт итогового веса инициативы
- Формула: вес = округление до десятых от [(ценность × скорость) / стоимость].
- Начальные значения: если какой-либо атрибут не задан — вес не вычисляется и отображается как «—».
- AC:
  1) При полном наборе значений (три атрибута) вес отображается с одним знаком после запятой.
  2) Пример расчёта: (5×3)/2 = 7.5 ⇒ вес 7.5.
  3) Сортировка по весу соответствует убыванию рассчитанного значения; элементы без веса в конце.

### FR5. Назначение ответственного
- Возможности: выбор ответственного из списка зарегистрированных пользователей; смена ответственного допустима любым пользователем.
- Отображение: на карточке и в деталях показывается аватар/инициалы и имя ответственного.
- AC:
  1) Ответственный выбирается и сохраняется; после обновления странички значение сохраняется.
  2) Фильтр «назначено на меня» показывает инициативы, где текущий пользователь — ответственный.

### FR6. Список инициатив: фильтры и сортировка
- Фильтры: «все», «я предложил», «назначено на меня».
- Сортировка: по весу инициативы по убыванию; элементы без веса — внизу.
- AC:
  1) Переключение фильтров обновляет список без перезагрузки страницы.
  2) Сортировка по весу стабильна и предсказуема.
  3) На мобильном элементы отображаются карточками, кликабельными на детали.

### FR7. Регистрация и вход, аутентификация JWT (24 часа)
- Регистрация: на окне логина кнопка «Зарегистрироваться»; поля: логин (уникальный), отображаемое имя, пароль, подтверждение пароля.
- Логин: логин + пароль. При успехе выдается JWT с TTL 24 часа; хранение токена на клиенте.
- AC:
  1) При успешной регистрации сразу можно войти с указанными данными.
  2) При успешном входе токен хранится и используется для запросов к backend.
  3) При истечении 24 часов требуется повторный вход; UI корректно обрабатывает 401.

## 5. UX и состояния интерфейса
- Экраны: логин/регистрация; список инициатив; карточка/детали инициативы с чатом; форма создания.
- Состояния: загрузка (скелетон/спиннер), пусто (подсказка действий), ошибка (toast/inline), успех (toast/скрытие формы).
- Контролы: поля ввода, markdown‑редактор (минимальный), радиогруппы/звёзды 1–5 для атрибутов, селект «ответственный», фильтры‑табы, сортировка фиксирована по весу.
- Мобильный: одноколоночный layout 360–414 px, крупные тапы (≥44 px), без горизонтального скролла.

## 6. Данные и правила (минимальная модель)

### Сущность: user
| имя | тип | обяз. | пример | примечание |
| --- | --- | --- | --- | --- |
| id | uuid | да | 550e8400-e29b-41d4-a716-446655440000 | |
| login | string | да | ivan | уникальный |
| displayName | string | да | Иван Петров | |
| passwordHash | string | да | — | хранение хеша |

### Сущность: initiative
| имя | тип | обяз. | пример | примечание |
| --- | --- | --- | --- | --- |
| id | uuid | да | — | |
| title | string(1–140) | да | Автоматизировать отчётность | |
| descriptionMd | text | да | # Инициатива ... | markdown |
| authorId | uuid | да | — | пользователь‑автор |
| assigneeId | uuid? | нет | — | ответственный |
| value | int(1–5)? | нет | 5 | |
| velocity | int(1–5)? | нет | 3 | скорость реализации |
| cost | int(1–5)? | нет | 2 | стоимость |
| weight | decimal(3,1)? | нет | 7.5 | вычислимое поле/кеш |
| createdAt | datetime | да | — | |

### Сущность: comment
| имя | тип | обяз. | пример | примечание |
| --- | --- | --- | --- | --- |
| id | uuid | да | — | |
| initiativeId | uuid | да | — | |
| authorId | uuid | да | — | |
| body | string(1–2000) | да | Предлагаю начать с MVP | |
| createdAt | datetime | да | — | |

### Правила и вычисления
- Диапазоны атрибутов строго 1…5.
- Формула веса: weight = round((value × velocity) / cost, 1). Если не все три заданы — weight=null.
- Значения вне диапазона отклоняются с ошибкой уровня поля.
- Сортировка по списку: order by weight desc nulls last, затем по createdAt desc.

### Сортировки и фильтры
- Фильтр «все»: без условий по автору/ассайнменту.
- Фильтр «я предложил»: authorId = currentUser.
- Фильтр «назначено на меня»: assigneeId = currentUser.
- Сортировка фиксированная: по weight desc nulls last.

## 7. Нефункциональные требования (простота и надёжность)
- Простота: сценарии US1–US6 укладываются в ≤3 шага каждый; ясные подписи/плейсхолдеры.
- Надёжность: устойчивость к перезагрузке (сессия на JWT), предсказуемые ошибки (toasts/inline), повторная отправка комментария.
- Адаптивность: корректный одноколоночный UI 360–414 px без горизонтального скролла.
- Наблюдаемость: логирование ошибок backend, health‑чек endpoint.

## 8. Ограничения и допущения
- Веб‑клиент (React) и backend (Go) — но конкретные технологии вне текущего PRD.
- Одна роль пользователя, без разграничения прав; любой может изменять атрибуты и ответственного.
- JWT сроком 24 часа; refresh‑механизм не входит в текущий объём.
- Реал‑тайм чат может быть реализован через polling/long‑polling; полноценный WebSocket вне скоупа.
- Уведомления по почте/Push вне скоупа.

## Чек-лист
- [x] Есть сценарии и связанные FR с AC.
- [x] Поля и ограничения перечислены таблицами с примерами.
- [x] Формулы расчёта веса указаны с примером.
- [x] NFR только про простоту/надёжность/адаптивность/наблюдаемость.
- [x] Out of Scope определён.


